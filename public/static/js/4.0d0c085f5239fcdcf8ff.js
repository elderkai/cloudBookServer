webpackJsonp([4],{W2Q3:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={name:"login",data:function(){return{formData:{username:"",password:""},rule:{username:[{validator:function(t,e,a){e?a():a(new Error("必须输入合法的用户名"))},tirgger:"blur"}],password:[{validator:function(t,e,a){e&&e.length>=5?a():a(new Error("请填写合法的密码"))},tirgger:"blur"}]},isLoading:!1}},methods:{handleLogin:function(){var t=this;this.isLoading=!0,console.log(this.formData),this.$axios.post("/login",this.formData).then(function(e){console.log(e),200==e.code?(t.$store.commit("CHANGE_USERINFO",e.data),t.$message.success("登录成功"),setTimeout(function(){t.$router.push("/layout")},1e3)):t.$message.error(e.msg),t.isLoading=!1}).catch(function(e){t.isLoading=!1})},validateLogin:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;t.handleLogin()})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("h1",{staticClass:"title"},[t._v("欢迎来到cloud-book后台管理系统")]),t._v(" "),a("div",{staticClass:"login-box"},[a("h2",{staticClass:"login-box-title"},[t._v("请登录")]),t._v(" "),a("el-form",{ref:"form",staticClass:"form",attrs:{rules:t.rule,model:t.formData}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:t.formData.username,callback:function(e){t.$set(t.formData,"username",e)},expression:"formData.username"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入密码"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.validateLogin(e)}},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1)],1),t._v(" "),a("el-button",{staticClass:"login-btn",attrs:{type:"primary",loading:t.isLoading},on:{click:t.validateLogin}},[t._v("登录")])],1)])},staticRenderFns:[]};var n=a("C7Lr")(o,r,!1,function(t){a("x2HG")},"data-v-b2450e40",null);e.default=n.exports},x2HG:function(t,e){}});
//# sourceMappingURL=4.0d0c085f5239fcdcf8ff.js.map